# コンテナ

## コンテナの起動

- ホスト側ポートは省略可（省略した場合は空いているポートが自動で割り振られ、`docker container ls`で確認する）

```bash
# ホスト側ポートにアクセス可
$ docker container run -d -p [ホスト側ポート]:[コンテナ側ポート] [イメージ名]:[タグ名]

# 指定した[イメージ名]から立てたコンテナの起動時にシェルに入る(-it)
$ docker container run -it [イメージ名]:[タグ名]

# コンテナに名前をつけて作成
#
# 同名のコンテナ名を作成したい場合は既存のコンテナを削除する必要があるので、本番環境ではあまり使用しない。
$ docker container run --name [コンテナ名] [イメージ名]:[タグ名]
```

## コンテナの一覧

```shell
# 一覧表示
$ docker container ls

# コンテナIDのみ一覧(-q オプション)
$ docker container ls -q
```

## コンテナの標準出力を確認

標準出力された結果を確認する(主にデバッグ用)

```shell
$ docker container logs [コンテナID]
```

## コンテナの削除

コンテナを削除

```bash
$ docker container rm <コンテナIDまたはコンテナ名>
```

実行していないコンテナを一括削除

```bash
$ docker container prune
```

## オプション

- `-d`オプションをつけると、常にバックグラウンドで起動するデタッチモードで起動できる
- `-a` ― 停止中のコンテナも表示する。
- `-s` ― ファイルサイズを表示する。
- `--name コンテナ名` ― コンテナ名を指定する。
- `-p ホストのポート番号:コンテナのポート番号` ― コンテナのポートをホストに公開する。コンテナ間の通信では不要。
- `--mount type=bind,src=ホストのディレクトリ,dst=コンテナのディレクトリ` ― バインドマウント。ホストのディレクトリをコンテナにマウントする。複数指定可能。
- `--mount type=volume,src=ボリューム,dst=コンテナのディレクトリ` ― ボリュームマウント。ボリュームをコンテナにマウントする。複数指定可能。
- `--volumes-from コンテナ` ― 指定したコンテナと同じボリュームにマウントする
- `-e 環境変数名=値` ― 環境変数の設定
- `-dit` ― コンテナをバックグラウンドで実行させる(デタッチモード)。デタッチ中のログは`docker container logs`で確認できる。
- `-it` ― 標準入出力をコンテナに結びつける(キー入力する場合)。
- `-i` ― 標準入出力をコンテナに結びつける(キー入力しない場合)。
- `--rm` ― コマンドの実行が完了したとき、コンテナを破棄する。
- `-w` ― コンテナ内の作業ディレクトリを指定する。
- `--net` ― 接続するDockerネットワークを指定する。
